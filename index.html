<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tbilisi Transport Pro</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <style>
        :root {
            --primary: #5d5fef;
            --secondary: #6c7ff2;
            --bg-main: #f4f7ff;
            --text-dark: #2d3142;
            --text-gray: #9196b2;
        }

        * { 
            box-sizing: border-box; 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body { 
            margin: 0; 
            background-color: var(--bg-main); 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            overflow: hidden; 
        }

        /* áƒ–áƒ”áƒ“áƒ áƒ—áƒ”áƒ—áƒ áƒ˜ áƒ‘áƒáƒ áƒáƒ—áƒ˜ */
        .header-card {
            background: white;
            padding: 20px 25px;
            border-bottom-left-radius: 35px;
            border-bottom-right-radius: 35px;
            box-shadow: 0 10px 25px rgba(93, 95, 239, 0.08);
            z-index: 1000;
        }

        .lang-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .lang-btn {
            border: none;
            background: #f0f2f8;
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: 700;
            font-size: 12px;
            color: var(--text-gray);
            transition: 0.3s;
        }

        .lang-btn.active {
            background: var(--primary);
            color: white;
        }

        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand h1 {
            margin: 0;
            font-size: 24px;
            color: var(--text-dark);
            font-weight: 800;
        }

        .brand p {
            margin: 5px 0 0;
            font-size: 13px;
            color: var(--text-gray);
        }

        .gps-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 18px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(93, 95, 239, 0.3);
        }

        /* áƒ áƒ£áƒ™áƒ˜áƒ¡ áƒ¡áƒ”áƒ¥áƒªáƒ˜áƒ */
        #map {
            flex: 1;
            width: 100%;
            z-index: 1;
        }

        /* áƒ¥áƒ•áƒ”áƒ“áƒ áƒáƒáƒœáƒ”áƒšáƒ˜ */
        .bottom-panel {
            background: white;
            height: 45%;
            border-top-left-radius: 35px;
            border-top-right-radius: 35px;
            padding: 25px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 0 -10px 25px rgba(0,0,0,0.05);
        }

        .panel-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--text-dark);
            margin-bottom: 20px;
            display: block;
        }

        /* áƒáƒ•áƒ¢áƒáƒ‘áƒ£áƒ¡áƒ˜áƒ¡ áƒ‘áƒáƒ áƒáƒ—áƒ˜ */
        .bus-card {
            background: #ffffff;
            border: 1px solid #f0f2f8;
            padding: 18px;
            border-radius: 22px;
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            position: relative;
            transition: transform 0.2s;
        }

        .bus-card:active {
            transform: scale(0.98);
        }

        .bus-badge {
            width: 52px;
            height: 52px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 20px;
            margin-right: 15px;
        }

        .bus-details b {
            font-size: 16px;
            color: var(--text-dark);
            display: block;
            margin-bottom: 4px;
        }

        .bus-details span {
            font-size: 13px;
            color: var(--text-gray);
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .fav-icon {
            position: absolute;
            right: 20px;
            color: #e0e4f2;
            font-size: 22px;
        }

        .fav-icon.active {
            color: #ffcc00;
        }

        /* Leaflet áƒ¡áƒ¢áƒ˜áƒšáƒ˜áƒ¡ áƒ’áƒáƒ¡áƒ¬áƒáƒ áƒ”áƒ‘áƒ */
        .leaflet-control-zoom { display: none; }
        .leaflet-control-attribution { display: none; }
    </style>
</head>
<body>

<div class="header-card">
    <div class="lang-selector">
        <button class="lang-btn active" onclick="setLanguage('ka', this)">GE</button>
        <button class="lang-btn" onclick="setLanguage('en', this)">EN</button>
        <button class="lang-btn" onclick="setLanguage('ru', this)">RU</button>
    </div>
    <div class="header-main">
        <div class="brand">
            <h1 id="txt-title">áƒ—áƒ‘áƒ˜áƒšáƒ˜áƒ¡áƒ˜áƒ¡ áƒ¢áƒ áƒáƒœáƒ¡áƒáƒáƒ áƒ¢áƒ˜</h1>
            <p id="txt-subtitle">áƒ áƒ”áƒáƒšáƒ£áƒ  áƒ“áƒ áƒáƒ¨áƒ˜ áƒ—áƒ•áƒáƒšáƒ§áƒ£áƒ áƒ˜áƒ¡ áƒ“áƒ”áƒ•áƒœáƒ”áƒ‘áƒ</p>
        </div>
        <button class="gps-btn" onclick="locateUser()">
            ğŸ“ <span id="txt-gps">áƒ©áƒ”áƒ›áƒ˜ áƒšáƒáƒ™áƒáƒªáƒ˜áƒ</span>
        </button>
    </div>
</div>

<div id="map"></div>

<div class="bottom-panel">
    <span class="panel-title" id="txt-routes">áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ”áƒ‘áƒ˜</span>
    <div id="bus-container">
        <p style="text-align:center; color:#adb5bd; margin-top:40px; font-size:14px;" id="txt-info">
            áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ©áƒáƒ áƒ—áƒáƒ— GPS áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒáƒœáƒáƒ®áƒáƒ•áƒáƒ“
        </p>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    const i18n = {
        ka: { title: "áƒ—áƒ‘áƒ˜áƒšáƒ˜áƒ¡áƒ˜áƒ¡ áƒ¢áƒ áƒáƒœáƒ¡áƒáƒáƒ áƒ¢áƒ˜", sub: "áƒ áƒ”áƒáƒšáƒ£áƒ  áƒ“áƒ áƒáƒ¨áƒ˜ áƒ—áƒ•áƒáƒšáƒ§áƒ£áƒ áƒ˜áƒ¡ áƒ“áƒ”áƒ•áƒœáƒ”áƒ‘áƒ", routes: "áƒ›áƒáƒ áƒ¨áƒ áƒ£áƒ¢áƒ”áƒ‘áƒ˜", gps: "áƒ©áƒ”áƒ›áƒ˜ áƒšáƒáƒ™áƒáƒªáƒ˜áƒ", info: "áƒ’áƒ—áƒ®áƒáƒ•áƒ— áƒ©áƒáƒ áƒ—áƒáƒ— GPS áƒ›áƒáƒœáƒáƒªáƒ”áƒ›áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒáƒœáƒáƒ®áƒáƒ•áƒáƒ“", min: "áƒ¬áƒ—", vehicles: "áƒ¢áƒ áƒáƒœáƒ¡áƒáƒáƒ áƒ¢áƒ˜" },
        en: { title: "Tbilisi Transport", sub: "Real-time live tracking", routes: "Routes", gps: "Find Me", info: "Please enable GPS to see data", min: "min", vehicles: "vehicles" },
        ru: { title: "Ğ¢Ğ±Ğ¸Ğ»Ğ¸ÑÑĞºĞ¸Ğ¹ Ğ¢Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚", sub: "Ğ–Ğ¸Ğ²Ğ¾Ğµ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ", routes: "ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹", gps: "Ğ“Ğ´Ğµ Ñ?", info: "Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ GPS Ğ´Ğ»Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…", min: "Ğ¼Ğ¸Ğ½", vehicles: "Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğ°" }
    };

    let currentLang = 'ka';
    let map = L.map('map', { zoomControl: false, tap: true }).setView([41.7151, 44.7870], 13);
    
    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png').addTo(map);

    function setLanguage(lang, btn) {
        currentLang = lang;
        document.getElementById('txt-title').innerText = i18n[lang].title;
        document.getElementById('txt-subtitle').innerText = i18n[lang].sub;
        document.getElementById('txt-routes').innerText = i18n[lang].routes;
        document.getElementById('txt-gps').innerText = i18n[lang].gps;
        document.getElementById('txt-info').innerText = i18n[lang].info;

        document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        
        if (document.querySelectorAll('.bus-card').length > 0) renderBuses();
    }

    function locateUser() {
        if (!navigator.geolocation) return alert("GPS not supported");
        
        navigator.geolocation.getCurrentPosition(pos => {
            const { latitude, longitude } = pos.coords;
            map.flyTo([latitude, longitude], 15, { duration: 1.5 });
            
            L.circleMarker([latitude, longitude], {
                radius: 10, color: 'white', fillColor: '#5d5fef', fillOpacity: 1, weight: 3
            }).addTo(map);

            renderBuses();
        });
    }

    function renderBuses() {
        const container = document.getElementById('bus-container');
        container.innerHTML = '';
        
        const mockData = [
            { id: 1, nr: '37', route: 'Samgori - Airport', time: 13, color: '#3b82f6', fav: true },
            { id: 2, nr: '55', route: 'Varketili - Delisi', time: 8, color: '#10b981', fav: false },
            { id: 3, nr: '121', route: 'Isani - Saburtalo', time: 5, color: '#f59e0b', fav: false }
        ];

        mockData.forEach(bus => {
            const card = document.createElement('div');
            card.className = 'bus-card';
            card.innerHTML = `
                <div class="bus-badge" style="background:${bus.color}">${bus.nr}</div>
                <div class="bus-details">
                    <b>${bus.route}</b>
                    <span>ğŸ•’ ~${bus.time} ${i18n[currentLang].min} â€¢ 4 ${i18n[currentLang].vehicles}</span>
                </div>
                <div class="fav-icon ${bus.fav ? 'active' : ''}">â˜…</div>
            `;
            container.appendChild(card);
        });
    }
</script>

</body>
</html>


